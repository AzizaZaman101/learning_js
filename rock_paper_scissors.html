<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>

    <!--what happened was - when the function playGame wasn't defined yet, and the variables were inside the button onclick attribute, 

    When you click Paper, the page likely loads once → Math.random() runs once → computer move is fixed

    Then your if–else winner logic changes, but the computerMove does not

    That’s why it looks like:

    Paper → computer always Rock/Paper

    Rock → computer always Paper/Scissors

    Scissors → computer always Rock/Paper

    It’s not random per click — it’s random per page load.

    It goes away when you move the computerMove logic inside the playGame function
    -->


    <!--The basic rules are - 
     1. when we click a button, the computer randomly picks a move
     2. compare the move to get the result
     3. save/update  the score
     4. Display the result in a popup
     -->


    <p>Rock Paper Scissors</p>

    

    <button onclick="playGame('Rock')"> Rock
    </button> 

    <button onclick="playGame('Paper')"> Paper
    </button> 
    
    <button onclick="playGame('Scissors')"> Scissors
    </button> 

    <button onclick="
    score.wins = 0;
    score.tie = 0;
    score.loses = 0;
    //here, if we didn't remove from localStorage, and reset the score to 0, and refreshed the page again, the values stored in localStorage will stay the same, and we will see the previously stored scores instead of 0's
    localStorage.removeItem('score');

    alert (`Wins: ${score.wins}, Loses: ${score.loses}, Ties : ${score.tie}`);
    "> Reset Score
    </button> 

    <script>
            //return the variable is preferable when you want to use the value outside the function instead of declaring it as a global variable.

            //a scope helps us prevent naming conflicts and accidental value changes.

            //we could use a return statement here as well
            //this playGame function takes a parameter userMove


            //to keep a track of the scores
            // let score = {
            //     wins : 0,
            //     loses : 0,
            //     tie : 0
            // };




            //we are getting the values from localStorage here to reset the values
            const score = JSON.parse(localStorage.getItem('score')) ||{
                wins : 0,
                loses : 0,
                tie: 0
            };
            //here, what I did wrong was to only read from the localStorage first. But the fact is that, the score object was null at the beginning, so when i wanted to do score.wins+=1, it couldn't add to the null value and the code crashed
            //so you have to initialize the value or get it from the localStorage so that it doesn't crash

            //or we could do -->
            //const score = JSON.parse(localStorage.getItem('score'));
            
            // if (score===null){ //if(!score)
            //     score{
            //         wins : 0,
            //         loses : 0,
            //         tie: 0
            //     };
            // }




            //we are able to get the scores from previous time from the localStorage
            //console.log(JSON.parse(localStorage.getItem('score')));
            //console.log(localStorage.getItem('score'));
            //this is a string
            //now, we need to convert the string into an object again


            function playGame(userMove) {

                //here to create a random number for the computer's choice
                let randomNumber = Math.random();

                 //can't use const here, because we will change the value later, as we want to access this variable outside the scope of the if statement
                let computerMove = '';

                if (randomNumber > 0 && randomNumber < (1 / 3)) {
                    computerMove = 'Rock';
                } else if (randomNumber >= (1 / 3) && randomNumber < (2 / 3)) {
                    computerMove = 'Paper';
                } else {
                    computerMove = 'Scissors';
                }

                let result = '';
                if (userMove === computerMove) 
                {
                    result = 'Tie';
                    score.tie +=1;
                } 
                else if (
                    (userMove === 'Rock' && computerMove === 'Scissors') ||
                    (userMove === 'Paper' && computerMove === 'Rock') ||
                    (userMove === 'Scissors' && computerMove === 'Paper')
                ) 
                {
                    result = 'You Win';
                    score.wins+=1;
                } 
                else 
                {
                    result = 'You Lose';
                    score.loses+=1;
                }

                //saving the score, so that we don't lose the score every time we refresh the page
                //localStorage only works with strings, so we have to convert it to a string to get it work
                localStorage.setItem('score', JSON.stringify(score));




                alert(`You picked ${userMove}. Computer picked ${computerMove}. ${result}\n
                Wins: ${score.wins}, Loses: ${score.loses}, Ties : ${score.tie}`);

            }
        </script>
</body>
</html>